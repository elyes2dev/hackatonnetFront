<!-- src/app/components/prize-form/prize-form.component.html -->
<div class="container py-4">
    <!-- Alert messages -->
    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show mb-4" role="alert">
      <strong>Success!</strong> {{ successMessage }}
      <button type="button" class="btn-close" (click)="clearSuccessMessage()" aria-label="Close"></button>
    </div>
  
    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
      <strong>Error!</strong> {{ errorMessage }}
      <button type="button" class="btn-close" (click)="clearErrorMessage()" aria-label="Close"></button>
    </div>
  
    <!-- Form card -->
    <div class="card shadow">
      <div class="card-header bg-primary text-white py-3">
        <h2 class="mb-0">Add New Prize</h2>
      </div>
      
      <div class="card-body p-4">
        <form [formGroup]="prizeForm" (ngSubmit)="onSubmit()">
          
          <!-- Prize Type -->
          <div class="mb-4">
            <label for="prizeType" class="form-label fw-bold">Prize Type</label>
            <select id="prizeType" formControlName="prizeType" class="form-select" 
                    [ngClass]="{'is-invalid': isFieldInvalid('prizeType')}">
              <option value="" disabled>Select prize type</option>
              <option *ngFor="let type of prizeTypes" [value]="type">{{ type }}</option>
            </select>
            <div class="form-text text-muted">Choose between money or product prizes</div>
            <div class="invalid-feedback" *ngIf="isFieldInvalid('prizeType')">
              Please select a prize type
            </div>
          </div>
          
          <!-- Money Type Fields -->
          <div class="card mb-4 border-light bg-light" *ngIf="prizeForm.get('prizeType')?.value === 'MONEY'">
            <div class="card-body">
              <h5 class="card-title mb-3">Money Prize Details</h5>
              <div class="mb-3">
                <label for="amount" class="form-label">Amount</label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input type="number" id="amount" formControlName="amount" class="form-control" 
                         placeholder="Enter amount" [ngClass]="{'is-invalid': isFieldInvalid('amount')}">
                  <div class="invalid-feedback" *ngIf="isFieldInvalid('amount')">
                    <span *ngIf="prizeForm.get('amount')?.errors?.['required']">Amount is required</span>
                    <span *ngIf="prizeForm.get('amount')?.errors?.['min']">Amount must be greater than 0</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Product Type Fields -->
          <div class="card mb-4 border-light bg-light" *ngIf="prizeForm.get('prizeType')?.value === 'PRODUCT'">
            <div class="card-body">
              <h5 class="card-title mb-3">Product Prize Details</h5>
              <div class="mb-3">
                <label for="productName" class="form-label">Product Name</label>
                <input type="text" id="productName" formControlName="productName" class="form-control" 
                       placeholder="Enter product name" [ngClass]="{'is-invalid': isFieldInvalid('productName')}">
                <div class="invalid-feedback" *ngIf="isFieldInvalid('productName')">
                  Product name is required
                </div>
              </div>
              
              <div class="mb-3">
                <label for="productDescription" class="form-label">Product Description</label>
                <textarea id="productDescription" formControlName="productDescription" class="form-control" 
                          rows="3" placeholder="Describe the product" [ngClass]="{'is-invalid': isFieldInvalid('productDescription')}"></textarea>
                <div class="invalid-feedback" *ngIf="isFieldInvalid('productDescription')">
                  Product description is required
                </div>
              </div>
            </div>
          </div>
          
          <!-- Prize Category -->
          <div class="mb-4">
            <label for="prizeCategory" class="form-label fw-bold">Prize Category</label>
            <select id="prizeCategory" formControlName="prizeCategory" class="form-select" 
                    [ngClass]="{'is-invalid': isFieldInvalid('prizeCategory')}">
              <option value="" disabled selected>Select category</option>
              <option *ngFor="let category of prizeCategories" [value]="category">
                {{ formatCategory(category) }}
              </option>
            </select>
            <div class="invalid-feedback" *ngIf="isFieldInvalid('prizeCategory')">
              Category is required
            </div>
          </div>
          
          <!-- Submission status -->
          <div *ngIf="submitting" class="alert alert-info mb-4">
            <div class="d-flex align-items-center">
              <div class="spinner-border spinner-border-sm me-2" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
              <span>Submitting prize data...</span>
            </div>
          </div>
          
          <!-- Form Actions -->
          <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
            <button type="button" class="btn btn-outline-secondary px-4 me-md-2" routerLink="/prizes">
              <i class="bi bi-x-circle me-2"></i>Cancel
            </button>
            <button type="submit" class="btn btn-primary px-4" [disabled]="prizeForm.invalid || submitting">
              <i class="bi bi-check-circle me-2"></i>Submit Prize
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>