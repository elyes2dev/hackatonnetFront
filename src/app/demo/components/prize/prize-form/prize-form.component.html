<app-navbar></app-navbar>
<div class="container py-4">
  <!-- Alert messages -->
  <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show mb-4" role="alert">
    <strong>Success!</strong> {{ successMessage }}
    <button type="button" class="btn-close" (click)="clearSuccessMessage()" aria-label="Close"></button>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
    <strong>Error!</strong> {{ errorMessage }}
    <button type="button" class="btn-close" (click)="clearErrorMessage()" aria-label="Close"></button>
  </div>

  <!-- Form with space theme - centered -->
  <div class="form-container">
    <form [formGroup]="prizeForm" (ngSubmit)="onSubmit()" class="form">
      <div class="form-title"><span>Add new</span></div>
      <div class="title-2"><span>PRIZE</span></div>
      
      <!-- Prize Type -->
      <div class="input-container mb-3">
        <select id="prizeType" formControlName="prizeType" class="input-mail" 
                [ngClass]="{'is-invalid': isFieldInvalid('prizeType')}">
          <option value="" disabled>Select prize type</option>
          <option *ngFor="let type of prizeTypes" [value]="type">{{ type }}</option>
        </select>
        <div class="text-light small mt-1" *ngIf="!isFieldInvalid('prizeType')">Choose between money or product prizes</div>
        <div class="text-danger small mt-1" *ngIf="isFieldInvalid('prizeType')">
          Please select a prize type
        </div>
      </div>
      
      <!-- Money Type Fields -->
      <div *ngIf="prizeForm.get('prizeType')?.value === 'MONEY'">
        <div class="input-container">
          <div class="input-group">
            <span class="input-group-text">$</span>
            <input type="number" id="amount" formControlName="amount" class="input-mail" 
                   placeholder="Enter amount">
          </div>
          <div class="text-danger small mt-1" *ngIf="isFieldInvalid('amount')">
            <span *ngIf="prizeForm.get('amount')?.errors?.['required']">Amount is required</span>
            <span *ngIf="prizeForm.get('amount')?.errors?.['min']">Amount must be greater than 0</span>
          </div>
        </div>
      </div>
      
      <!-- Product Type Fields -->
      <div *ngIf="prizeForm.get('prizeType')?.value === 'PRODUCT'">
        <div class="input-container">
          <input type="text" id="productName" formControlName="productName" class="input-mail" 
                 placeholder="Enter product name">
          <div class="text-danger small mt-1" *ngIf="isFieldInvalid('productName')">
            Product name is required
          </div>
        </div>
        
        <div class="input-container">
          <textarea id="productDescription" formControlName="productDescription" class="input-mail" 
                    rows="3" placeholder="Describe the product"></textarea>
          <div class="text-danger small mt-1" *ngIf="isFieldInvalid('productDescription')">
            Product description is required
          </div>
        </div>
      </div>
      
      <!-- Prize Category -->
      <div class="input-container">
        <select id="prizeCategory" formControlName="prizeCategory" class="input-mail" 
                [ngClass]="{'is-invalid': isFieldInvalid('prizeCategory')}">
          <option value="" disabled selected>Select category</option>
          <option *ngFor="let category of prizeCategories" [value]="category">
            {{ formatCategory(category) }}
          </option>
        </select>
        <div class="text-danger small mt-1" *ngIf="isFieldInvalid('prizeCategory')">
          Category is required
        </div>
      </div>
      
      <!-- Submission status -->
      <div *ngIf="submitting" class="text-light mb-3">
        <div class="d-flex align-items-center">
          <div class="spinner-border spinner-border-sm me-2" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <span>Submitting prize data...</span>
        </div>
      </div>
      
      <!-- Form Actions -->
      <div class="d-flex gap-2 justify-content-between mt-3">
        <button type="button" class="submit cancel-button" routerLink="/prizes">
          <span class="sign-text">Cancel</span>
        </button>
        <button type="submit" class="submit" [disabled]="prizeForm.invalid || submitting">
          <span class="sign-text">Submit Prize</span>
        </button>
      </div>
      
      <!-- Stars animation -->
      <section class="bg-stars">
        <span class="star"></span>
        <span class="star"></span>
        <span class="star"></span>
        <span class="star"></span>
      </section>
    </form>
  </div>
</div>
<app-footer></app-footer>