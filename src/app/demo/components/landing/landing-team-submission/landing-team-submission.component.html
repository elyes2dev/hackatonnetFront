<div class="main-container">
    <!-- Loading -->
    <div *ngIf="loading" class="loading-overlay">
      <div class="spinner"></div>
      <p>Chargement...</p>
    </div>
  
    <!-- Erreur -->
    <div *ngIf="error" class="error-message">
      <p>{{ error }}</p>
    </div>
  
    <!-- En-tête -->
    <div class="header">
      <h1>Soumissions des Équipes</h1>
    </div>
  
    <!-- Formulaire de création -->
    <div class="section creation-section">
      <h2>Nouvelle Soumission</h2>
      <form (ngSubmit)="createSubmission()" class="form-container">
        <div class="form-group">
          <label for="projectName">Nom du projet</label>
          <input type="text" id="projectName" [(ngModel)]="newSubmission.projectName" name="projectName" required class="form-input" />
        </div>
        <div class="form-group">
          <label for="description">Description</label>
          <textarea id="description" [(ngModel)]="newSubmission.description" name="description" required class="form-input"></textarea>
        </div>
        <div class="form-group">
          <label for="repoLink">Lien GitHub</label>
          <input type="url" id="repoLink" [(ngModel)]="newSubmission.repoLink" name="repoLink" required class="form-input" />
        </div>
        <div class="form-group">
          <label for="teamMemberId">ID du membre de l'équipe</label>
          <input type="number" id="teamMemberId" [(ngModel)]="newSubmission.teamMember!.id" name="teamMemberId" required class="form-input" />
        </div>
        <button type="submit" class="btn btn-success">Soumettre</button>
      </form>
    </div>
  
    <!-- Liste des soumissions -->
    <div class="section submissions-section">
      <h2>Soumissions Récentes</h2>
      <div class="card-container" *ngIf="submissions && submissions.length > 0; else noSubmissions">
        <div class="card" *ngFor="let submission of submissions">
          <h3>{{ submission.projectName || 'Non spécifié' }}</h3>
          <p><strong>Description :</strong> {{ submission.description || 'Aucune description' }}</p>
          <p><strong>Lien GitHub :</strong> <a href="{{ submission.repoLink }}" target="_blank" class="project-link">{{ submission.repoLink || 'Aucun lien' }}</a></p>
          <p><strong>Membre :</strong> {{ submission.teamMember?.id || 'Non disponible' }}</p>
          <div class="card-actions">
            <button class="btn btn-edit" (click)="selectSubmission(submission)">Modifier</button>
            <button class="btn btn-delete" (click)="delete(submission.id!)">Supprimer</button>
          </div>
          <!-- Formulaire de modification sous la carte correspondante -->
          <div class="modification-section" *ngIf="selectedSubmission && selectedSubmission.id === submission.id">
            <h2>Modifier la Soumission</h2>
            <form (ngSubmit)="updateSubmission()" class="form-container">
              <div class="form-group">
                <label for="editProjectName-{{ submission.id }}">Nom du projet</label>
                <input type="text" id="editProjectName-{{ submission.id }}" [(ngModel)]="selectedSubmission.projectName" name="projectName" required class="form-input" />
              </div>
              <div class="form-group">
                <label for="editDescription-{{ submission.id }}">Description</label>
                <textarea id="editDescription-{{ submission.id }}" [(ngModel)]="selectedSubmission.description" name="description" required class="form-input"></textarea>
              </div>
              <div class="form-group">
                <label for="editRepoLink-{{ submission.id }}">Lien GitHub</label>
                <input type="url" id="editRepoLink-{{ submission.id }}" [(ngModel)]="selectedSubmission.repoLink" name="repoLink" required class="form-input" />
              </div>
              <div class="form-group">
                <label for="editTeamMemberId-{{ submission.id }}">ID du membre de l'équipe</label>
                <input type="number" id="editTeamMemberId-{{ submission.id }}" [(ngModel)]="selectedSubmission.teamMember!.id" name="teamMemberId" required class="form-input" />
              </div>
              <button type="submit" class="btn btn-success">Mettre à jour</button>
              <button type="button" class="btn btn-cancel" (click)="cancelModification()">Annuler</button>
            </form>
          </div>
        </div>
      </div>
      <ng-template #noSubmissions>
        <p class="no-data" *ngIf="!loading && !error">Aucune soumission trouvée.</p>
      </ng-template>
    </div>
  </div>